{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.number.parse-int.js","webpack:///./src/views/community/Business.vue?c6e5","webpack:///./src/views/community/Business.vue?9e53","webpack:///./src/components/Map.vue?ad9a","webpack:///./src/mixins/places.js","webpack:///src/components/Map.vue","webpack:///./src/components/Map.vue?3ece","webpack:///./src/components/Map.vue?1cff","webpack:///src/views/community/Business.vue","webpack:///./src/views/community/Business.vue?304b","webpack:///./src/views/community/Business.vue?0c11","webpack:///./node_modules/core-js/internals/number-parse-float.js","webpack:///./src/components/Map.vue?0f34","webpack:///./node_modules/core-js/internals/number-parse-int.js","webpack:///./node_modules/core-js/modules/es.number.parse-float.js"],"names":["$","parseInt","target","stat","forced","Number","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_e","mapList","key","staticStyle","organizations","_v","_l","item","i","_s","Caption","Contact","Address","Phone","icon","Dostup","mapIcons","staticRenderFns","places","data","googleApis","API_KEY","process","autocompleteService","predictions","sessionToken","loading","map","LatLng","lat","lng","markers","taskColorMap","directionsService","directionsRenderer","minZoomLevel","methods","loadMapScript","Promise","res","window","loadingGoogleEvent","Event","mapScript","document","createElement","type","defer","src","onload","console","log","dispatchEvent","body","appendChild","addEventListener","initMapPlaces","$set","google","maps","AutocompleteSessionToken","AutocompleteService","initMap","Map","getElementById","zoom","center","addListener","event","$emit","initDirections","DirectionsService","DirectionsRenderer","suppressMarkers","setMap","searchPlaces","input","getPlacePredictions","types","status","getLonLat","placeId","geocoder","Geocoder","lonLat","longitude","latitude","geocode","results","geometry","location","getLocation","setPos","latLng","panTo","setMarkers","forEach","feature","oldFeatureId","getId","hasOld","features","some","el","id","remove","Feature","Data","properties","coordinates","contains","getFeatureById","add","setStyle","text","getProperty","color","url","length","bounds","LatLngBounds","processPoints","getGeometry","extend","fitBounds","getZoom","setZoom","callback","thisArg","call","Point","get","getArray","g","task","station","calcRoute","start","end","tasks","optimized","info","order","link","waypoints","parseFloat","stopover","request","origin","destination","optimizeWaypoints","provideRouteAlternatives","travelMode","route","result","setDirections","routes","legs","waypoint_order","buildLink","encodeURI","start_address","end_address","mixins","props","Array","computed","title","Caption_small","phone","watch","handler","val","mounted","$on","content","infowindow","setPosition","open","component","components","Dost_Kolyas","Dost_ODA","Dost_Sluh","Dost_Um","Dost_Zren","mapFilters","deep","getOrgs","metaInfo","meta","VContainer","VDivider","VIcon","VList","VListItem","VListItemAction","VListItemContent","VListItemSubtitle","VListItemTitle","global","trim","whitespaces","$parseFloat","FORCED","Infinity","module","exports","string","trimmedString","String","charAt","$parseInt","hex","radix","S","test"],"mappings":"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","file":"js/business.fb2c11f5.js","sourcesContent":["var $ = require('../internals/export');\nvar parseInt = require('../internals/number-parse-int');\n\n// `Number.parseInt` method\n// https://tc39.github.io/ecma262/#sec-number.parseint\n$({ target: 'Number', stat: true, forced: Number.parseInt != parseInt }, {\n  parseInt: parseInt\n});\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Business.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"flex-column\",attrs:{\"fluid\":\"\",\"fill-height\":\"\",\"pa-0\":\"\"}},[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.loading)?_c('div',{staticClass:\"map-loading\"}):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\",\"tag\":\"div\"}},[(!_vm.mapList)?_c('div',{key:1,staticStyle:{\"flex\":\"1\",\"min-width\":\"100%\"}},[_c('Map',{attrs:{\"organizations\":_vm.organizations}})],1):_vm._e(),(_vm.mapList)?_c('v-container',{key:2},[_c('div',{staticClass:\"text-h3 my-6 my-sm-12 ml-3\"},[_vm._v(\"Список объектов\")]),_c('v-list',[_vm._l((_vm.organizations),function(item,i){return [_c('v-list-item',{key:i,attrs:{\"three-line\":\"\"}},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(item.Caption))]),_c('v-list-item-subtitle',[_vm._v(\"Адрес: \"+_vm._s(item.Contact.Address))]),_c('v-list-item-subtitle',[_vm._v(\"Телефон: \"+_vm._s(item.Contact.Phone))])],1),_c('v-list-item-action',[_c('div',{staticClass:\"d-flex\"},[_vm._l((item.Dostup),function(icon,key){return [(item.Dostup[key] === 2)?_c('v-icon',{key:key,staticClass:\"ml-3\",attrs:{\"color\":\"success\"}},[_vm._v(_vm._s(_vm.mapIcons[key]))]):_vm._e()]})],2)])],1),_c('v-divider',{key:(\"divider-\" + i)})]})],2)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"map\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const places = {\n  data() {\n    return {\n      googleApis: {\n        API_KEY: process.env.VUE_APP_GAPI_KEY,\n        autocompleteService: null,\n        predictions: null,\n        sessionToken: null,\n        loading: false,\n        map: null,\n        LatLng: {lat: 56.8119915, lng: 60.4772995},\n        markers: {\n          \"type\": \"FeatureCollection\",\n          \"features\": [],\n        },\n        taskColorMap: {\n          'A': 'c00',\n          'B': 'dd0',\n          'C': '00c',\n          'D': '555',\n        },\n        directionsService: null,\n        directionsRenderer: null,\n        minZoomLevel: 8,\n      },\n    }\n  },\n  methods: {\n    async loadMapScript() {\n      return new Promise((res) => {\n        // MAP API\n        if ('google' in window) return res();\n        if (!('loadingGoogleEvent' in window)) {\n          window.loadingGoogleEvent = new Event('googleLoaded');\n          var mapScript = document.createElement('script');\n          mapScript.type = 'text/javascript';\n          mapScript.defer = true;\n          mapScript.src = `https://maps.googleapis.com/maps/api/js?key=${this.googleApis.API_KEY}&libraries=places`;\n          mapScript.onload = () => {\n            console.log('google map script loaded');\n            document.dispatchEvent(window.loadingGoogleEvent);\n          };\n          document.body.appendChild(mapScript);\n        }\n        document.addEventListener('googleLoaded', () => {\n          return res();\n        });\n      });\n    },\n    initMapPlaces() {\n      console.log('init places map api');\n      // Create a new session token.\n      this.$set(this.googleApis, 'sessionToken', new window.google.maps.places.AutocompleteSessionToken());\n\n      // Pass the token to the autocomplete service.\n      this.$set(this.googleApis, 'autocompleteService', new window.google.maps.places.AutocompleteService());\n    },\n    initMap() {\n      console.log('init map api');\n      const map = new window.google.maps.Map(\n        document.getElementById(\"map\"),\n        {\n          zoom: 8,\n          center: this.googleApis.LatLng,\n        }\n      );\n      this.$set(this.googleApis, 'map', map);\n\n      // event handling\n      map.data.addListener(\"click\", event => {\n        this.$emit('google.data.click', event);\n      });\n    },\n    initDirections() {\n      // init directions API\n      console.log('init directions api');\n      this.$set(this.googleApis, 'directionsService', new window.google.maps.DirectionsService());\n      this.$set(this.googleApis, 'directionsRenderer', new window.google.maps.DirectionsRenderer({\n        suppressMarkers: true,\n      }));\n      this.googleApis.directionsRenderer.setMap(this.googleApis.map);\n    },\n    searchPlaces(input) {\n      this.$set(this.googleApis, 'loading', true);\n      this.googleApis.autocompleteService.getPlacePredictions(\n        {\n          input,\n          sessionToken: this.googleApis.sessionToken,\n          types: ['geocode'],\n        },\n        (predictions, status) => {\n          if (status === 'OK') {\n            this.$set(this.googleApis, 'predictions', predictions);\n          }\n          this.$set(this.googleApis, 'loading', false);\n        },\n      );\n    },\n    async getLonLat(placeId) {\n      // convert place_id to lon lat\n      return new Promise((res) => {\n        const geocoder = new window.google.maps.Geocoder();\n        let lonLat = {\n          longitude: '',\n          latitude: '',\n        };\n        geocoder.geocode({ placeId }, (results, status) => {\n          if (status === \"OK\") {\n            lonLat = {\n              longitude: results[0].geometry.location.lng(),\n              latitude: results[0].geometry.location.lat(),\n            }\n          }\n          return res(lonLat);\n        });\n      })\n    },\n    async getLocation(placeId) {\n      return new Promise((res) => {\n        const geocoder = new window.google.maps.Geocoder();\n        geocoder.geocode({ placeId }, (results, status) => {\n          let location = null;\n          if (status === \"OK\") {\n            location = results[0].geometry.location;\n          }\n          return res(location);\n        });\n      })\n    },\n    setPos(latLng) {\n      this.googleApis.map.panTo(latLng);\n    },\n    setMarkers(markers) {\n      // remove old\n      this.googleApis.map?.data?.forEach((feature) => {\n        const oldFeatureId = feature.getId();\n        const hasOld = markers.features.some((el) => {\n          return Number.parseInt(oldFeatureId) === Number.parseInt(el.id)\n        })\n        // if map contain old marker, then remove it\n        if (!hasOld) {\n          this.googleApis.map.data.remove(feature);\n        }\n      })\n      \n      // add new\n      markers.features.forEach((feature) => {\n        const Feature = new window.google.maps.Data.Feature({\n          id: feature.id,\n          properties: feature.properties,\n          geometry: {\n            lat: feature.geometry.coordinates[1],\n            lng: feature.geometry.coordinates[0],\n          },\n        });\n        // if map not contain marker\n        if (!this.googleApis.map.data.contains(this.googleApis.map.data.getFeatureById(feature.id))) {\n          this.googleApis.map.data.add(Feature);\n        }\n      });\n\n      // coloring\n      this.googleApis.map.data.setStyle((feature) => {\n        const text = feature.getProperty('text') || '';\n        const color = feature.getProperty('color') || '0075FF';\n        const icon = feature.getProperty('icon') || '';\n        return {\n          icon: { url: `https://cdn.mapmarker.io/api/v1/pin?size=190&text=${text}&icon=${icon}&size=40&background=${color}&color=FFF&hoffset=-1` }\n        };\n      });\n\n      if (markers.features.length) this.zoom();\n    },\n    zoom() {\n      // zoom to show all features in map on screen\n      const bounds = new window.google.maps.LatLngBounds();\n      this.googleApis.map.data.forEach((feature) => {\n        this.processPoints(feature.getGeometry(), bounds.extend, bounds);\n      });\n      this.googleApis.map.fitBounds(bounds);\n      const zoom = this.googleApis.map.getZoom();\n      this.googleApis.map.setZoom(zoom > 8 ? 8 : zoom);\n    },\n    processPoints(geometry, callback, thisArg) {\n      /**\n       * Process each point in a Geometry, regardless of how deep the points may lie.\n       * @param {google.maps.Data.Geometry} geometry The structure to process\n       * @param {function(google.maps.LatLng)} callback A function to call on each\n       *     LatLng point encountered (e.g. Array.push)\n       * @param {Object} thisArg The value of 'this' as provided to 'callback' (e.g.\n       *     myArray)\n       */\n      if (geometry instanceof window.google.maps.LatLng) {\n        callback.call(thisArg, geometry);\n      } else if (geometry instanceof window.google.maps.Data.Point) {\n        callback.call(thisArg, geometry.get());\n      } else {\n        geometry.getArray().forEach(function(g) {\n          this.processPoints(g, callback, thisArg);\n        });\n      }\n    },\n    panTo(task) {\n      // pan to task\n      const lat = task.station.latitude;\n      const lng = task.station.longitude;\n      this.googleApis.map.panTo({ lat, lng });\n    },\n    async calcRoute({start, end, tasks, optimized}) {\n      /* calc route \n       * @start, @end = Object{lat: String, lng: String}\n       * @tasks = Array<task>\n       * @optimized = Boolean\n      */\n      return new Promise((res) => {\n        let info = {};\n        let order = [];\n        let link = '';\n        const waypoints = tasks.map((el) => {\n          const lat = Number.parseFloat(el.station.latitude);\n          const lng = Number.parseFloat(el.station.longitude);\n          return {\n            location: new window.google.maps.LatLng({lat, lng}),\n            stopover: true,\n          }\n        });\n        var request = {\n          origin: start,\n          destination: end,\n          waypoints,\n          optimizeWaypoints: !!optimized,\n          provideRouteAlternatives: true,\n          travelMode: 'DRIVING'\n        };\n        this.googleApis.directionsService.route(request, (result, status) => {\n          if (status == 'OK') {\n            this.googleApis.directionsRenderer.setDirections(result);\n            info = result.routes[0].legs;\n            order = result.routes[0].waypoint_order;\n            link = this.buildLink(info);\n          }\n          return res({ info: [...info], order, link });\n        });\n      });\n    },\n    buildLink(legs) {\n      let link = `https://www.google.com/maps/dir/?api=1&travelmode=driving&origin=${encodeURI(legs[0].start_address)}&waypoints=`;\n\n      for (let i = 0; i < legs.length - 1; i++) {\n        link += encodeURI(legs[i].end_address);\n        (i < legs.length - 2) ? link += \"|\" : null;\n      }\n\n      link += `&destination=${encodeURI(legs[legs.length-1].end_address)}`;\n      return link;\n    },\n  },\n};\n\nexport default places\n","<template>\n  <div id=\"map\"></div>\n</template>\n<script>\nimport places from '@/mixins/places';\nimport { mapState } from 'vuex'\n// import datas from '@/message.json';\n\nexport default {\n  mixins: [places],\n  props: {\n    organizations: Array,\n  },\n  data() {\n    return {\n      loading: false,\n    }\n  },\n  computed: {\n    ...mapState(['mapFilters']),\n    markers() {\n      let markers = {\n        type: \"FeatureCollection\",\n        features: [],\n      };\n      if (!this.organizations.length) return markers;\n      const features = this.organizations.map((task) => {\n        return {\n          type: 'Feature',\n          properties: {\n            title: task.Caption_small,\n            phone: task.Contact?.Phone,\n            // text: 'dfg',\n            icon: 'fa-star'\n          },\n          id: task.id,\n          geometry: {\n            type: 'Point',\n            coordinates: [\n              Number.parseFloat(task.Contact.Longitude),\n              Number.parseFloat(task.Contact.Latitude),\n            ]\n          },\n        }\n      })\n      markers.features = features;\n      return markers;\n    },\n  },\n  watch: {\n    // LatLng(latLng) {\n    //   this.setPos(latLng);\n    // },\n    markers: {\n      handler(val) {\n        if ('google' in window) this.setMarkers(val);\n      },\n    },\n  },\n  mounted() {\n    this.loadMapScript()\n      .then(() => {\n        this.initMap();\n        this.setMarkers(this.markers);\n        // this.initDirections();\n      })\n\n    // handle event\n    this.$on('google.data.click', (feature) => {\n      const title = feature.feature.getProperty('title');\n      const phone = feature.feature.getProperty('phone');\n      const content = `\n        <div style=\"padding:1rem;\">\n          <div class=\"title\">\n            ${title}\n          </div>\n          <div class=\"subtitle mt-3\">\n            ${phone}\n          </div>\n        </div>\n      `;\n      const infowindow = new window.google.maps.InfoWindow({\n        content,\n      });\n      infowindow.setPosition(feature.latLng);\n      infowindow.open(this.googleApis.map, new window.google.maps.MVCObject());\n    })\n  },\n}\n</script>\n<style lang=\"scss\">\n  #map {\n    height: 100%;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=d9c5f73e&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-container fluid fill-height pa-0 class=\"flex-column\">\n    <transition name=\"fade\">\n      <div class=\"map-loading\" v-if=\"loading\"></div>\n    </transition>\n    <transition name=\"fade\" mode=\"out-in\" tag=\"div\">\n      <div v-if=\"!mapList\" style=\"flex:1;min-width:100%;\" :key=\"1\">\n        <Map :organizations=\"organizations\" />\n      </div>\n      <v-container v-if=\"mapList\" :key=\"2\">\n        <div class=\"text-h3 my-6 my-sm-12 ml-3\">Список объектов</div>\n        <v-list>\n          <template v-for=\"(item, i) in organizations\">\n            <v-list-item :key=\"i\" three-line>\n              <v-list-item-content>\n                <v-list-item-title>{{ item.Caption }}</v-list-item-title>\n                <v-list-item-subtitle>Адрес: {{ item.Contact.Address }}</v-list-item-subtitle>\n                <v-list-item-subtitle>Телефон: {{ item.Contact.Phone }}</v-list-item-subtitle>\n              </v-list-item-content>\n              <v-list-item-action>\n                <div class=\"d-flex\">\n                  <template v-for=\"(icon, key) in item.Dostup\">\n                    <v-icon color=\"success\" class=\"ml-3\" :key=\"key\"  v-if=\"item.Dostup[key] === 2\">{{ mapIcons[key] }}</v-icon>\n                  </template>\n                </div>\n              </v-list-item-action>\n            </v-list-item>\n            <v-divider :key=\"`divider-${i}`\"></v-divider>\n          </template>\n        </v-list>\n      </v-container>\n    </transition>\n  </v-container>\n</template>\n<script>\nimport Map from '@/components/Map.vue';\nimport { mapState } from 'vuex';\n\nexport default {\n  components: {\n    Map,\n  },\n  data() {\n    return {\n      organizations: [],\n      loading: false,\n      mapIcons: {\n        Dost_Kolyas: 'mdi-wheelchair-accessibility',\n        Dost_ODA: 'mdi-human-cane',\n        Dost_Sluh: 'mdi-ear-hearing-off',\n        Dost_Um: 'mdi-brain',\n        Dost_Zren: 'mdi-eye-off'\n      }\n    }\n  },\n  computed: {\n    ...mapState(['mapList', 'mapFilters']),\n  },\n  watch: {\n    mapFilters: {\n      deep: true,\n      handler() {\n        this.getOrgs();\n      },\n    },\n  },\n  metaInfo() {\n    return {\n      meta: [\n        // { name: 'viewport', content: 'width=device-width, initial-scale=1.0, user-scalable=no' },\n      ],\n    };\n  },\n  mounted() {\n    // call api for get data\n    this.getOrgs();\n  },\n  methods: {\n    async getOrgs() {\n      const url = '/api/freeenv/getresult';\n      const { region } = this.mapFilters;\n      const { sfera } = this.mapFilters;\n      const data = `{\"inputsParam\":'{\"regnId\":\"66053000\",\"regnText\":\"${region}\",\"sferaId\":\"11\",\"sferaText\":\"${sfera}\",\"vidId\":null,\"vidText\":null,\"captionId\":null,\"captionText\":null,\"captionOsiId\":null,\"captionOsiText\":null}'}`;\n      const headers = {\n        'Content-Type': 'application/json',\n      };\n      await this.callApi({ url, data, headers });\n    },\n    async callApi({ url, data, headers }) {\n      this.loading = true;\n      try {\n        const res = await this.$axios.post(url, data, { headers });\n        const result = JSON.parse(res.data.d).Result;\n        this.organizations = result;\n      } catch (error) {\n        console.log(error);\n      }\n      this.loading = false;\n    },\n  },\n}\n</script>\n<style lang=\"scss\">\n  .map-loading {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    max-height: 100vh;\n    width: 100%;\n    height: 100%;\n    background-color: rgba($color: #ccd8ff, $alpha: .5);\n    backdrop-filter: blur(3px);\n    z-index: 1000;\n  }\n  .map-loading::after {\n    content: \" \";\n    pointer-events: none;\n    position: absolute;\n    width: 8rem;\n    height: 8rem;\n    border-radius: 50%;\n    border: 5px solid;\n    border-color: var(--v-primary-base) transparent var(--v-primary-base) transparent;\n    top: calc(50vh - 4rem);\n    left: calc(50% - 4rem);\n    z-index: 1000;\n    animation: lds-dual-ring 1.2s linear infinite;\n  }\n\n  @keyframes lds-dual-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Business.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Business.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Business.vue?vue&type=template&id=1d465538&\"\nimport script from \"./Business.vue?vue&type=script&lang=js&\"\nexport * from \"./Business.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Business.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAction } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\ninstallComponents(component, {VContainer,VDivider,VIcon,VList,VListItem,VListItemAction,VListItemContent,VListItemSubtitle,VListItemTitle})\n","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar $parseFloat = global.parseFloat;\nvar FORCED = 1 / $parseFloat(whitespaces + '-0') !== -Infinity;\n\n// `parseFloat` method\n// https://tc39.github.io/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(String(string));\n  var result = $parseFloat(trimmedString);\n  return result === 0 && trimmedString.charAt(0) == '-' ? -0 : result;\n} : $parseFloat;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&lang=scss&\"","var global = require('../internals/global');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar $parseInt = global.parseInt;\nvar hex = /^[+-]?0[Xx]/;\nvar FORCED = $parseInt(whitespaces + '08') !== 8 || $parseInt(whitespaces + '0x16') !== 22;\n\n// `parseInt` method\n// https://tc39.github.io/ecma262/#sec-parseint-string-radix\nmodule.exports = FORCED ? function parseInt(string, radix) {\n  var S = trim(String(string));\n  return $parseInt(S, (radix >>> 0) || (hex.test(S) ? 16 : 10));\n} : $parseInt;\n","var $ = require('../internals/export');\nvar parseFloat = require('../internals/number-parse-float');\n\n// `Number.parseFloat` method\n// https://tc39.github.io/ecma262/#sec-number.parseFloat\n$({ target: 'Number', stat: true, forced: Number.parseFloat != parseFloat }, {\n  parseFloat: parseFloat\n});\n"],"sourceRoot":""}